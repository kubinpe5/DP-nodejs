<!DOCTYPE html>
<html>
<head>
	<title>Automated JS testing</title>
	<meta charset="UTF-8"/>
	<script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
	<script type="text/javascript">
		function runTest2() {
			$.ajax({
				type: 'GET',
				url: '127.0.0.1:3000/test2'
			}).done(function(data) {
				var tmp = '<p>' + data + '</p>';
				$('#resultList').append( data );
			}).fail(function() {
				console.log("Chyba při komunikaci!");
			});
		}

		$( document ).ready( function() {
    		runTest2();
    		$( '#sendForm' ).submit( function() {
    			$.ajax({
				  	type: 'POST',
				  	url: 'http://127.0.0.1:3000/messages'
				}).done(function( data ) {
    				runTest2();
  				}).fail(function() {
    				alert( 'Při komunikaci se vyskytla chyba!' );
				});
				$( '#newMessage' ).val( '' );
				return false;
			});
		});
	</script>
</head>
<body>
	<h1>Automated JS testing</h1>
		<ol class="messagesList" id="messagesList"></ol>
	<form action="/messages" method="POST" id="sendForm" autocomplete="off">
		<button class="btn btn-default" type="submit" id="sendButton">Spustit testy</button>
	</form>
</body>
</html>